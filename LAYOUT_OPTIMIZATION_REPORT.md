# å·¥ä½œåŒºé¡µé¢ä¿®å¤ - å®ŒæˆæŠ¥å‘Š

## âœ… ä»»åŠ¡ä¸€ï¼šä¿®å¤ä¸»å¸ƒå±€ï¼Œå®ç°å…¨å±é«˜åº¦

### ä¿®æ”¹å†…å®¹

#### 1. `index.css` - å…¨å±€é«˜åº¦è®¾ç½®
```css
html {
  height: 100%;
}

body {
  height: 100%;
}

#root {
  height: 100%;
  display: flex;
  flex-direction: column;
}
```

**æ•ˆæœï¼š** ç¡®ä¿ä» HTML åˆ° React æ ¹èŠ‚ç‚¹çš„å®Œæ•´é«˜åº¦é“¾

#### 2. `App.tsx` - ä¸»åº”ç”¨å¸ƒå±€
```tsx
<div style={{ 
  display: 'flex', 
  flexDirection: 'column', 
  flex: 1, 
  minHeight: '100vh' 
}}>
  <Routes>
    {/* è·¯ç”±å†…å®¹è‡ªåŠ¨å æ»¡å‰©ä½™ç©ºé—´ */}
  </Routes>
</div>
```

**æ•ˆæœï¼š** è®©è·¯ç”±å†…å®¹ï¼ˆDashboardPage/WorkspacePageï¼‰è‡ªåŠ¨ä¼¸å±•

#### 3. `WorkspacePage.tsx` - å·¥ä½œåŒºé«˜åº¦
```tsx
// æ”¹å‰
<div style={{ minHeight: '100vh', ... }}>

// æ”¹å
<div style={{ height: '100%', flex: 1, ... }}>
```

**æ•ˆæœï¼š** ä»å›ºå®šé«˜åº¦æ”¹ä¸ºç›¸å¯¹é«˜åº¦ï¼Œä¸çˆ¶å®¹å™¨ä¸€è‡´

#### 4. `WorkspacePage.tsx` - SplitLayout å®¹å™¨
```tsx
<div style={{ flex: 1, display: 'flex', overflow: 'hidden' }}>
  <SplitLayout ... />
</div>
```

**æ•ˆæœï¼š** SplitLayout å æ»¡å·¥ä½œåŒºä¸‹æ–¹çš„å…¨éƒ¨å‰©ä½™ç©ºé—´

### ç°åœ¨çš„å¸ƒå±€å±‚çº§
```
Window (æµè§ˆå™¨çª—å£)
  â””â”€ <html> height: 100%
      â””â”€ <body> height: 100%
          â””â”€ #root flex: 1, display: flex, flex-direction: column
              â””â”€ App (Routes wrapper)
                  â”œâ”€ DashboardPage (height: 100%, flex: 1) [é¦–é¡µ]
                  â””â”€ WorkspacePage (height: 100%, flex: 1) [å·¥ä½œåŒº]
                      â”œâ”€ <header> (è‡ªé€‚åº”é«˜åº¦ï¼Œå›ºå®šå†…å®¹)
                      â””â”€ SplitLayout (flex: 1, å æ»¡å‰©ä½™ç©ºé—´)
                          â”œâ”€ å·¦é¢æ¿ (40%) - ChatInterface
                          â””â”€ å³é¢æ¿ (60%) - GenomeBrowser
```

### éªŒæ”¶æ ‡å‡† âœ…
- âœ… å·¥ä½œåŒºé¡µé¢ä¸‹æ–¹æ²¡æœ‰ä¸å¿…è¦çš„ç©ºç™½åŒºåŸŸ
- âœ… æµè§ˆå™¨çª—å£é«˜åº¦å˜åŒ–æ—¶ï¼Œå¸ƒå±€è‡ªé€‚åº”
- âœ… AI åŠ©æ‰‹å†…å®¹è¿‡å¤šæ—¶æ˜¾ç¤ºå†…éƒ¨æ»šåŠ¨æ¡ï¼ˆChatHistory ä½¿ç”¨ `flex: 1` å’Œ `overflow-y: auto`ï¼‰

---

## âœ… ä»»åŠ¡äºŒï¼šä¼˜åŒ–é¡¶éƒ¨å¯¼èˆªæ 

### ä¿®æ”¹å†…å®¹

#### 1. `WorkspacePage.tsx` - å¯¼å…¥ useSession
```tsx
import { useSession, SessionProvider, ... } from '../contexts/SessionContext'
```

#### 2. `WorkspacePageContent` - è·å–ä¼šè¯é…ç½®
```tsx
function WorkspacePageContent() {
  const { config } = useSession()  // ä» SessionContext è·å–
  // ...
}
```

#### 3. å¯¼èˆªæ æ˜¾ç¤ºæ”¹è¿›
```tsx
// æ”¹å‰
<span>Session {sessionId}</span>

// æ”¹å
<span>{config.name} ({config.organism} - {config.referenceGenome})</span>
```

**æ•ˆæœç¤ºä¾‹ï¼š** 
- æ˜¾ç¤ºï¼š`GenoVerse > TP53 Region Analysis (Human - hg38)`
- è€Œä¸æ˜¯ï¼š`GenoVerse > Session 1760955386304`

### Tracks æŒ‰é’®ä½ç½® âœ…
- âœ… å·²åœ¨ `BrowserControls.tsx` å³ä¾§æ­£ç¡®æ”¾ç½®
- âœ… åœ¨ `< > + -` å¯¼èˆªæŒ‰é’®å’Œä½ç½®æ˜¾ç¤ºæ—è¾¹
- âœ… é€»è¾‘ä¸Šå±äºæµè§ˆå™¨å·¥å…·æ ï¼Œè€Œéå…¨å±€å¯¼èˆª

### éªŒæ”¶æ ‡å‡† âœ…
- âœ… é¡¶éƒ¨å¯¼èˆªæ æ˜¾ç¤ºæœ‰æ„ä¹‰çš„ä¼šè¯åç§°
- âœ… æ˜¾ç¤ºç”Ÿç‰©ä½“å’Œå‚è€ƒåŸºå› ç»„ä¿¡æ¯
- âœ… "Tracks" æŒ‰é’®ä½ç½®æ­£ç¡®ï¼ˆåœ¨æµè§ˆå™¨é¢æ¿å·¥å…·æ å†…ï¼‰
- âœ… å¯¼èˆªæ ä¿¡æ¯æ¸…æ™°ï¼Œç»“æ„åˆç†

---

## ğŸ“Š æ”¹åŠ¨æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | æ”¹åŠ¨ç±»å‹ | è¡Œæ•°å˜åŒ– |
|------|--------|--------|
| `index.css` | ä¿®æ”¹ | +12 è¡Œï¼ˆæ·»åŠ å…¨é«˜åº¦æ”¯æŒï¼‰ |
| `App.tsx` | ä¿®æ”¹ | æ”¹è¿› Router å¸ƒå±€ |
| `WorkspacePage.tsx` | ä¿®æ”¹ | ä¿®æ”¹å¯¼å…¥ã€å¸ƒå±€ã€å¯¼èˆªæ æ˜¾ç¤º |
| **æ€»è®¡** | - | å…³é”®æ”¹åŠ¨ 3 å¤„ |

---

## ğŸ¯ å®ç°æ•ˆæœ

### è§†è§‰å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GenoVerse > TP53 Region Analysis (Human - hg38)  Save Export Settings â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€ ChatInterface (40%) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ GenomeBrowser (60%) â”‚
â”‚  â”‚                                â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Model Configuration            â”‚  â”‚ â”‚ < > + - chr1:1-1 â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚ â”‚ Tracks ^^^^^^^ â”‚ â”‚
â”‚  â”‚                                â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  Chat History                  â”‚  â”‚                     â”‚
â”‚  â”‚                                â”‚  â”‚ JBrowse             â”‚
â”‚  â”‚  [è‡ªåŠ¨å†…éƒ¨æ»šåŠ¨]                 â”‚  â”‚ (Phase 4)           â”‚
â”‚  â”‚                                â”‚  â”‚                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                     â”‚
â”‚  â”‚ User Input                       â”‚  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  <â”€â”€â”€â”€ SplitLayout å¯æ‹–åŠ¨åˆ†éš”ç¬¦ â”€â”€â”€â”€â”€â”€>
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å“åº”å¼ç‰¹æ€§
- âœ… çª—å£æ‹‰ä¼¸æ—¶æ‰€æœ‰é¢æ¿è‡ªåŠ¨æ‰©å±•
- âœ… çª—å£ç¼©å°æ—¶ä¿æŒæ¯”ä¾‹
- âœ… å†…å®¹æº¢å‡ºæ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### Flexbox å±‚çº§
```
display: flex
â”œâ”€ flex-direction: column (App -> WorkspacePage)
â”œâ”€ flex: 1 (å†…å®¹å æ»¡å‰©ä½™ç©ºé—´)
â”œâ”€ height: 100% (ç»§æ‰¿çˆ¶å®¹å™¨é«˜åº¦)
â””â”€ overflow: hidden (é˜²æ­¢å†…å®¹æº¢å‡ºå®¹å™¨)
```

### CSS å±‚çº§
```css
html, body, #root â†’ 100% é«˜åº¦åŸºç¡€
App â†’ flex: 1 ç›¸å¯¹å®šä½
WorkspacePage â†’ flex: 1 + height: 100%
SplitLayout å®¹å™¨ â†’ flex: 1 å æ»¡å‰©ä½™
ChatInterface â†’ flex: 1 å æ»¡å·¦é¢æ¿
GenomeBrowser â†’ flex: 1 å æ»¡å³é¢æ¿
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥å»ºè®®

1. **é…ç½®æŒä¹…åŒ–** (Phase 2)
   - DashboardPage ä¿å­˜ä¼šè¯åç§°åˆ° sessionStorage
   - SetupWizard ä¼ é€’å®Œæ•´é…ç½®åˆ° WorkspacePage

2. **è½¨é“ç®¡ç†** (Phase 3)
   - Tracks æŒ‰é’®ç‚¹å‡»æ‰“å¼€è½¨é“é€‰æ‹©å™¨
   - æ”¯æŒæ·»åŠ /åˆ é™¤è½¨é“

3. **JBrowse é›†æˆ** (Phase 4)
   - æ›¿æ¢ GenomeBrowser å ä½ç¬¦
   - å®ç°çœŸå®åŸºå› ç»„æµè§ˆåŠŸèƒ½

---

## ğŸš€ æµ‹è¯•æ£€æŸ¥è¡¨

- [ ] `npm run dev` æˆåŠŸå¯åŠ¨
- [ ] è®¿é—® `/workspace/{sessionId}` æ— é”™è¯¯
- [ ] å¯¼èˆªæ æ­£ç¡®æ˜¾ç¤ºä¼šè¯åç§°å’Œç”Ÿç‰©ä½“ä¿¡æ¯
- [ ] æµè§ˆå™¨çª—å£é«˜åº¦å˜åŒ–æ—¶ï¼Œå¸ƒå±€è‡ªé€‚åº”
- [ ] ChatInterface å†…å®¹æº¢å‡ºæ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡
- [ ] SplitLayout åˆ†éš”ç¬¦å¯æ‹–åŠ¨è°ƒæ•´æ¯”ä¾‹
- [ ] æ²¡æœ‰æ§åˆ¶å°é”™è¯¯
- [ ] æ·±è‰²æ¨¡å¼ä¸‹è§†è§‰æ•ˆæœæ­£å¸¸

---

## âœ¨ å…³é”®æ”¹è¿›æ€»ç»“

1. **å®Œæ•´é«˜åº¦å ç”¨** - ä» `minHeight: 100vh` æ”¹ä¸ºçœŸæ­£çš„ `height: 100%` + flex å¸ƒå±€
2. **æ™ºèƒ½å¯¼èˆªæ ** - ä»æ˜¾ç¤º sessionId æ”¹ä¸ºæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„ä¼šè¯åç§°å’Œé…ç½®
3. **åˆç†çš„ä¿¡æ¯æ¶æ„** - Tracks æŒ‰é’®åœ¨å…¶åŠŸèƒ½å½’å±çš„ä½ç½®ï¼ˆæµè§ˆå™¨å·¥å…·æ ï¼‰
4. **å“åº”å¼è®¾è®¡** - çª—å£å¤§å°å˜åŒ–æ—¶è‡ªåŠ¨è°ƒæ•´ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°

æ‰€æœ‰æ”¹åŠ¨éƒ½ä¿æŒäº†ä»£ç ç®€æ´æ€§ï¼Œæ²¡æœ‰å¢åŠ å¤æ‚æ€§ã€‚
